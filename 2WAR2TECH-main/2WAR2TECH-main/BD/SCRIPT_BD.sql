-- MySQL Script generated by MySQL Workbench
-- Thu Sep 22 11:22:07 2022
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema wartech
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Table `FACULTY`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `FACULTY` ;

CREATE TABLE IF NOT EXISTS `FACULTY` (
  `ID_FACULTY` INT NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(200) NOT NULL,
  `ACTIVE` TINYINT NOT NULL DEFAULT 1,
  PRIMARY KEY (`ID_FACULTY`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SPECIALTY`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SPECIALTY` ;

CREATE TABLE IF NOT EXISTS `SPECIALTY` (
  `ID_SPECIALTY` INT NOT NULL AUTO_INCREMENT,
  `ID_FACULTY` INT NOT NULL,
  `NAME` VARCHAR(200) NOT NULL,
  `ACTIVE` TINYINT NOT NULL DEFAULT 1,
  PRIMARY KEY (`ID_SPECIALTY`, `ID_FACULTY`),
  INDEX `fk_SPECIALTY_FACULTY1_idx` (`ID_FACULTY` ASC) VISIBLE,
  CONSTRAINT `fk_SPECIALTY_FACULTY1`
    FOREIGN KEY (`ID_FACULTY`)
    REFERENCES `FACULTY` (`ID_FACULTY`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `USER`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `USER` ;

CREATE TABLE IF NOT EXISTS `USER` (
  `ID_USER` INT NOT NULL AUTO_INCREMENT,
  `ID_SPECIALTY` INT NOT NULL,
  `ID_PUCP` VARCHAR(8) NULL,
  `NAMES` VARCHAR(200) NOT NULL,
  `F_LAST_NAME` VARCHAR(200) NOT NULL,
  `M_LAST_NAME` VARCHAR(200) NULL,
  `TELEPHONE` VARCHAR(200) NULL,
  `EMAIL` VARCHAR(200) NOT NULL,
  `PASSWORD` VARCHAR(200) NOT NULL,
  `REG_DATE` DATETIME NOT NULL,
  `ACTIVE` TINYINT NOT NULL DEFAULT 1,
  PRIMARY KEY (`ID_USER`),
  INDEX `fk_USER_SPECIALTY1_idx` (`ID_SPECIALTY` ASC) VISIBLE,
  CONSTRAINT `fk_USER_SPECIALTY1`
    FOREIGN KEY (`ID_SPECIALTY`)
    REFERENCES `SPECIALTY` (`ID_SPECIALTY`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SYSLOG`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SYSLOG` ;

CREATE TABLE IF NOT EXISTS `SYSLOG` (
  `DATEOPE` DATETIME NOT NULL,
  `MESSAGE` VARCHAR(1000) NOT NULL)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `THESIS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `THESIS` ;

CREATE TABLE IF NOT EXISTS `THESIS` (
  `ID_THESIS` INT NOT NULL,
  `TITLE` VARCHAR(200) NOT NULL,
  `THEME` VARCHAR(200) NOT NULL,
  `DESCRIPTION` VARCHAR(200) NOT NULL,
  `NAME` VARCHAR(200) NOT NULL,
  `ACTIVE` TINYINT NOT NULL DEFAULT 1,
  PRIMARY KEY (`ID_THESIS`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SEMESTER`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `SEMESTER` ;

CREATE TABLE IF NOT EXISTS `SEMESTER` (
  `ID_SEMESTER` INT NOT NULL AUTO_INCREMENT,
  `ID_SPECIALTY` INT NOT NULL,
  `BEGIN_DATE` DATE NOT NULL,
  `END_DATE` DATE NOT NULL,
  `ACTIVE` TINYINT NOT NULL DEFAULT 1,
  PRIMARY KEY (`ID_SEMESTER`, `ID_SPECIALTY`),
  INDEX `fk_SEMESTER_SPECIALTY1_idx` (`ID_SPECIALTY` ASC) VISIBLE,
  CONSTRAINT `fk_SEMESTER_SPECIALTY1`
    FOREIGN KEY (`ID_SPECIALTY`)
    REFERENCES `SPECIALTY` (`ID_SPECIALTY`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COURSE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `COURSE` ;

CREATE TABLE IF NOT EXISTS `COURSE` (
  `ID_COURSE` INT NOT NULL AUTO_INCREMENT,
  `ID_SPECIALTY` INT NOT NULL,
  `NAME` VARCHAR(200) NOT NULL,
  `CREDITS` DECIMAL(2) NOT NULL,
  `ACTIVE` TINYINT NOT NULL DEFAULT 1,
  PRIMARY KEY (`ID_COURSE`, `ID_SPECIALTY`),
  INDEX `fk_COURSE_SPECIALTY1_idx` (`ID_SPECIALTY` ASC) VISIBLE,
  CONSTRAINT `fk_COURSE_SPECIALTY1`
    FOREIGN KEY (`ID_SPECIALTY`)
    REFERENCES `SPECIALTY` (`ID_SPECIALTY`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `COURSE_X_SEMESTER`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `COURSE_X_SEMESTER` ;

CREATE TABLE IF NOT EXISTS `COURSE_X_SEMESTER` (
  `ID_COURSE` INT NOT NULL,
  `ID_SEMESTER` INT NOT NULL,
  `THEME_QUANTITY` INT NOT NULL,
  `ACTIVE` TINYINT NOT NULL DEFAULT 1,
  PRIMARY KEY (`ID_COURSE`, `ID_SEMESTER`),
  INDEX `fk_COURSE_X_SEMESTER_SEMESTER1_idx` (`ID_SEMESTER` ASC) VISIBLE,
  INDEX `fk_COURSE_X_SEMESTER_COURSE1_idx` (`ID_COURSE` ASC) VISIBLE,
  CONSTRAINT `fk_COURSE_X_SEMESTER_SEMESTER1`
    FOREIGN KEY (`ID_SEMESTER`)
    REFERENCES `SEMESTER` (`ID_SEMESTER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_COURSE_X_SEMESTER_COURSE1`
    FOREIGN KEY (`ID_COURSE`)
    REFERENCES `COURSE` (`ID_COURSE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ROLE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `ROLE` ;

CREATE TABLE IF NOT EXISTS `ROLE` (
  `ID_ROLE` INT NOT NULL AUTO_INCREMENT,
  `DESCRIPTION` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`ID_ROLE`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `USER_X_ROLE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `USER_X_ROLE` ;

CREATE TABLE IF NOT EXISTS `USER_X_ROLE` (
  `ID_USER` INT NOT NULL,
  `ID_ROLE` INT NOT NULL,
  PRIMARY KEY (`ID_USER`, `ID_ROLE`),
  INDEX `fk_USER_X_ROLE_ROLE1_idx` (`ID_ROLE` ASC) VISIBLE,
  CONSTRAINT `fk_USER_X_ROLE_USER1`
    FOREIGN KEY (`ID_USER`)
    REFERENCES `USER` (`ID_USER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_USER_X_ROLE_ROLE1`
    FOREIGN KEY (`ID_ROLE`)
    REFERENCES `ROLE` (`ID_ROLE`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `USER_X_COURSE_X_SEMESTER`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `USER_X_COURSE_X_SEMESTER` ;

CREATE TABLE IF NOT EXISTS `USER_X_COURSE_X_SEMESTER` (
  `ID_COURSE` INT NOT NULL,
  `ID_SEMESTER` INT NOT NULL,
  `ID_USER` INT NOT NULL,
  PRIMARY KEY (`ID_COURSE`, `ID_SEMESTER`, `ID_USER`),
  INDEX `fk_USER_X_COURSE_X_SEMESTER_USER1_idx` (`ID_USER` ASC) VISIBLE,
  CONSTRAINT `fk_USER_X_COURSE_X_SEMESTER_COURSE_X_SEMESTER1`
    FOREIGN KEY (`ID_COURSE` , `ID_SEMESTER`)
    REFERENCES `COURSE_X_SEMESTER` (`ID_COURSE` , `ID_SEMESTER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_USER_X_COURSE_X_SEMESTER_USER1`
    FOREIGN KEY (`ID_USER`)
    REFERENCES `USER` (`ID_USER`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
